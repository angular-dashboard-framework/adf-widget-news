!function(e,n){"use strict";function t(e){e.widget("news",{title:"News",description:"Displays a RSS/Atom feed",category:"News",templateUrl:"{widgetsPath}/news/src/view.html",controller:"NewsController",controllerAs:"vm",config:{num:5,showTitle:!0,showDescription:!0},resolve:{feed:["NewsService","config",function(e,n){if(n.url)return e.get(n)}]},edit:{templateUrl:"{widgetsPath}/news/src/edit.html"}})}function r(e,n,t){function r(e){return e.num||(e.num=5),t+encodeURIComponent(e.url)+"&num="+e.num}function i(t){var i=e.defer();return n.jsonp(r(t)).success(function(e){e&&e.feed?i.resolve(e.feed):i.reject("response does not contain feed element")}).error(function(e){i.reject(e)}),i.promise}return{get:i}}function i(){return function(e){return""===e?null:new Date(e)}}function o(){return function(e){if("object"==typeof e&&null!==e){const n=navigator.language||navigator.userLanguage;return e.hasOwnProperty(n)?e[n]:e}return e}}function l(e,n){this.feed=e}angular.module("adf.widget.news",["adf.provider"]).constant("newsServiceUrl","").config(t),t.$inject=["dashboardProvider"],angular.module("adf.widget.news").run(["$templateCache",function(e){e.put("{widgetsPath}/news/src/edit.html",'<form role=form><div class=form-group><label for=url>Feed url</label> <input type=url class=form-control id=url ng-model=config.url placeholder="Enter feed url"></div><div class=form-group><label for=num>Number of Entries</label> <input type=number class=form-control id=num ng-model=config.num></div><div class=form-group><label for=showTitle>Show Feed Title</label> <input type=checkbox class=form-control id=showTitle ng-model=config.showTitle></div><div class=form-group><label for=showTitle>Show Feed Description</label> <input type=checkbox class=form-control id=showDescription ng-model=config.showDescription></div></form>'),e.put("{widgetsPath}/news/src/view.html","<div class=news><div class=\"alert alert-info\" ng-if=!vm.feed>Please insert a feed url in the widget configuration</div><div ng-if=vm.feed><h3 ng-if=config.showTitle><a ng-href={{vm.feed.link}} target=_blank>{{vm.feed.title}}</a></h3><p ng-if=config.showDescription>{{ vm.feed.description | parseLanguage}}</p><div class=media ng-repeat=\"entry in vm.feed.entries\"><div class=media-body><h4 class=media-heading><a ng-href={{entry.link}} target=_blank>{{entry.title}}</a></h4><div ng-bind-html=entry.contentSnippet></div><small>{{ (entry.author) ? entry.author + ',' : '' }} {{(entry.pubDate) ? entry.pubDate : '' | toDate | date: 'yyyy-MM-dd HH:mm'}}</small></div></div></div></div>")}]),angular.module("adf.widget.news").service("NewsService",r),r.$inject=["$q","$http","newsServiceUrl"],angular.module("adf.widget.news").filter("toDate",i),angular.module("adf.widget.news").filter("parseLanguage",o),angular.module("adf.widget.news").controller("NewsController",l),l.$inject=["feed","config"]}(window);